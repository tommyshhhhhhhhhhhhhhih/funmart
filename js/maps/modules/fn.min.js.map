{"version":3,"sources":["src/js/modules/fn.mjs"],"names":["doFn","target","event","func","option","window","addEventListener","opt","attachEvent","htmlString","div","document","createElement","innerHTML","trim","firstChild","scripts","querySelectorAll","currentScript","length","src","currentScriptChunks","split","currentScriptFile","replace","html","documentElement","top","pageYOffset","scrollTop","clientTop","scrollTopCache","style","cssText","concat","scrollTo","el","rect","getBoundingClientRect","offsetHeight","bottom","right","innerHeight","clientHeight","left","innerWidth","clientWidth","delay","_this","this","setTimeout","call","wait","mustRun","timeout","startTime","Date","args","arguments","curTime","undefined","clearTimeout","apply"],"mappings":"iCACA,SAASA,EAAKC,EAAQC,EAAOC,EAAMC,GAElC,GADAH,EAASA,GAAUI,OACfA,OAAOC,iBAAkB,CAC5B,IAAIC,EAAMH,IAAU,EACpBH,EAAOK,iBAAiBJ,EAAOC,EAAMI,QAErCN,EAAOO,YAAY,KAAON,EAAOC,kCAiF5B,SAA+BM,GACrC,IAAIC,EAAMC,SAASC,cAAc,OAIjC,OAHAF,EAAIG,UAAYJ,EAAWK,OAGpBJ,EAAIK,gCA4BL,WACN,IAAIC,EAAUL,SAASM,iBAAiB,eACpCC,EAAgBF,EAAQA,EAAQG,OAAS,GAAGC,IAC5CC,EAAsBH,EAAcI,MAAM,KAC1CC,EAAoBF,EAAoBA,EAAoBF,OAAS,GAEzE,OAAOD,EAAcM,QAAQD,EAAmB,IAAID,MAAM,OAAO,uBA7B3D,WACN,IAAIG,EAAOd,SAASe,gBAChBC,GAAOtB,OAAOuB,aAAeH,EAAKI,YAAcJ,EAAKK,WAAa,GACtEzB,OAAO0B,eAAiBJ,EACxBF,EAAKO,MAAMC,SAAX,0DAAAC,OAAgFP,EAAhF,yBAEM,WACKhB,SAASe,gBACfM,MAAMC,QAAU,GACrB5B,OAAO8B,SAAS,EAAG9B,OAAO0B,gBAC1B1B,OAAO0B,eAAiB,kBArClB,SAAsBK,GAC5B,IAAIC,EAAOD,EAAGE,wBAId,OAFoC,IAApBF,EAAGG,cAIH,GAAfF,EAAKG,QACS,GAAdH,EAAKI,OACLJ,EAAKV,MAAQtB,OAAOqC,aAAe/B,SAASe,gBAAgBiB,eAC5DN,EAAKO,OAASvC,OAAOwC,YAAclC,SAASe,gBAAgBoB,oBAhDvD,SAAa7C,EAAQC,EAAOC,EAAMC,GAExC,GADAH,EAASA,GAAUI,OACfA,OAAOC,iBAAkB,CAC5B,IAAIC,EAAMH,IAAU,EACpBH,EAAOK,iBAAiBJ,EAAOC,EAAMI,QAErCN,EAAOO,YAAY,KAAON,EAAOC,SA5B5B,SAAYF,EAAQC,EAAOC,EAAMC,EAAQ2C,GAC/C9C,EAASA,GAAUI,OAEL,SAAVH,GAEH6C,EAAQA,GAAS,GAOjB/C,EAAKC,EAAQC,EANG,WACf,IAAI8C,EAAQC,KACZC,WAAY,WACX/C,EAAKgD,KAAKH,IACRD,IAE2B3C,IAI/BJ,EAAKC,EAHe,gBAAVC,EAEVA,EAAQA,EAAMsB,QAAQ,UAAW,IAGpBtB,EAFOC,EAAMC,eAmBrB,SAAkBD,EAAMiD,EAAMC,GACpC,IAAIC,EACAC,EAAY,IAAIC,KAEpB,OAAO,WACN,IACIC,EAAOC,UACPC,EAAU,IAAIH,UAEFI,IAAZN,GACHO,aAAaP,GAGaD,GAAvBM,EAAUJ,GACbpD,EAAK2D,MATQb,KASOQ,GACpBF,EAAYI,GAGZL,EAAUJ,WAAW/C,EAAMiD","file":"../../modules/fn.min.js","sourcesContent":["/* ---------------------------------------- [START] Window EventListener */\r\nfunction doFn(target, event, func, option) {\r\n\ttarget = target || window;\r\n\tif (window.addEventListener) {\r\n\t\tvar opt = option || false;\r\n\t\ttarget.addEventListener(event, func, opt);\r\n\t} else {\r\n\t\ttarget.attachEvent('on' + event, func);\r\n\t}\r\n}\r\n\r\nexport function on(target, event, func, option, delay) {\r\n\ttarget = target || window;\r\n\r\n\tif (event === 'load') {\r\n\t\t// 因為客戶要整體安裝Vue，所以所有使用load的項目延遲生成\r\n\t\tdelay = delay || 20;\r\n\t\tvar funcDelay = function() {\r\n\t\t\tvar _this = this;\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\tfunc.call(_this);\r\n\t\t\t}, delay);\r\n\t\t}\r\n\t\tdoFn(target, event, funcDelay, option);\r\n\t} else if (event === 'load:origin') {\r\n\t\t// load 原生，不延遲方式生成\r\n\t\tevent = event.replace(/:origin/, '');\r\n\t\tdoFn(target, event, func, option);\r\n\t} else {\r\n\t\tdoFn(target, event, func, option);\r\n\t}\r\n}\r\n\r\nexport function off(target, event, func, option) {\r\n\ttarget = target || window;\r\n\tif (window.addEventListener) {\r\n\t\tvar opt = option || false;\r\n\t\ttarget.addEventListener(event, func, opt);\r\n\t} else {\r\n\t\ttarget.attachEvent('on' + event, func);\r\n\t}\r\n}\r\n/* ---------------------------------------- [END] Window EventListener */\r\n\r\n/* ---------------------------------------- [START] 簡單的節流函數 */\r\n// https://www.cnblogs.com/coco1s/p/5499469.html\r\nexport function throttle(func, wait, mustRun) {\r\n\tvar timeout;\r\n\tvar startTime = new Date();\r\n\r\n\treturn function () {\r\n\t\tvar context = this;\r\n\t\tvar args = arguments;\r\n\t\tvar curTime = new Date();\r\n\r\n\t\tif (timeout !== undefined) {\r\n\t\t\tclearTimeout(timeout);\r\n\t\t}\r\n\t\t// 如果達到了規定的觸發時間間隔，觸發 handler\r\n\t\tif (curTime - startTime >= mustRun) {\r\n\t\t\tfunc.apply(context, args);\r\n\t\t\tstartTime = curTime;\r\n\t\t\t// 沒達到觸發間隔，重新設定定時器\r\n\t\t} else {\r\n\t\t\ttimeout = setTimeout(func, wait);\r\n\t\t}\r\n\t};\r\n}\r\n/* ---------------------------------------- [END] 簡單的節流函數 */\r\n\r\n/* ---------------------------------------- [START] isInViewport */\r\nexport function isInViewport(el) {\r\n\tvar rect = el.getBoundingClientRect();\r\n\r\n\tvar isVisible = el.offsetHeight !== 0;\r\n\r\n\treturn (\r\n\t\tisVisible &&\r\n\t\trect.bottom >= 0 &&\r\n\t\trect.right >= 0 &&\r\n\t\trect.top <= (window.innerHeight || document.documentElement.clientHeight) &&\r\n\t\trect.left <= (window.innerWidth || document.documentElement.clientWidth)\r\n\t);\r\n}\r\n/* ---------------------------------------- [END] isInViewport */\r\n\r\n/* ---------------------------------------- [START] 從 String 取得 HTML Element */\r\n// https://stackoverflow.com/a/494348/11240898\r\nexport function createElementFromHTML(htmlString) {\r\n\tvar div = document.createElement('div');\r\n\tdiv.innerHTML = htmlString.trim();\r\n\r\n\t// Change this to div.childNodes to support multiple top-level nodes\r\n\treturn div.firstChild;\r\n}\r\n/* ---------------------------------------- [END] 從 String 取得 HTML Element */\r\n\r\n/* ---------------------------------------- [START] Disable/Enable Scroll */\r\nexport function docDisableScroll() {\r\n\tvar html = document.documentElement;\r\n\tvar top = (window.pageYOffset || html.scrollTop) - (html.clientTop || 0);\r\n\twindow.scrollTopCache = top;\r\n\thtml.style.cssText += `position: fixed; width: 100%; overflow-y: hidden; top:-${top}px`;\r\n}\r\nexport function docEnableScroll() {\r\n\tvar html = document.documentElement;\r\n\thtml.style.cssText = '';\r\n\twindow.scrollTo(0, window.scrollTopCache);\r\n\twindow.scrollTopCache = 0;\r\n}\r\n/* ---------------------------------------- [END] Disable/Enable Scroll */\r\n\r\n/* ---------------------------------------- [START] 取得正確的資源位置 */\r\n// https://stackoverflow.com/a/26023176/11240898\r\n/**\r\n * Current Script Path | 取得正確的資源位置\r\n *\r\n * Get the dir path to the currently executing script file\r\n * which is always the last one in the scripts array with\r\n * an [src] attr\r\n */\r\nexport function currentScriptPath() {\r\n\tvar scripts = document.querySelectorAll('script[src]');\r\n\tvar currentScript = scripts[scripts.length - 1].src;\r\n\tvar currentScriptChunks = currentScript.split('/');\r\n\tvar currentScriptFile = currentScriptChunks[currentScriptChunks.length - 1];\r\n\r\n\treturn currentScript.replace(currentScriptFile, '').split('js/')[0];\r\n}\r\n/* ---------------------------------------- [END] 取得正確的資源位置 */\r\n"],"sourceRoot":"../../../src/"}