!function(){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild}var Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t,c,e,u=(function(t,e){t.exports=function(){function u(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=0,e=void 0,o=void 0,c=function(t,e){h[r]=t,h[r+1]=e,2===(r+=2)&&(o?o(v):y())},t="undefined"!=typeof window?window:void 0,i=t||{},s=i.MutationObserver||i.WebKitMutationObserver,a="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(v,1)}}var h=new Array(1e3);function v(){for(var t=0;t<r;t+=2){var e=h[t],n=h[t+1];e(n),h[t]=void 0,h[t+1]=void 0}r=0}var d,p,_,b,y=void 0;function m(t,e){var n=this,r=new this.constructor(O);void 0===r[w]&&D(r);var o=n._state;if(o){var i=arguments[o-1];c(function(){return M(o,r,i,n._result)})}else B(n,r,t,e);return r}function g(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(O);return k(e,t),e}y=a?function(){return process.nextTick(v)}:s?(p=0,_=new s(v),b=document.createTextNode(""),_.observe(b,{characterData:!0}),function(){b.data=p=++p%2}):l?((d=new MessageChannel).port1.onmessage=v,function(){return d.port2.postMessage(0)}):void 0===t?function(){try{var t=Function("return this")().require("vertx");return void 0===(e=t.runOnLoop||t.runOnContext)?f():function(){e(v)}}catch(t){return f()}}():f();var w=Math.random().toString(36).substring(2);function O(){}var j=void 0,x=1,T=2;function A(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function C(t,e,n){var r,o,i,s;e.constructor===t.constructor&&n===m&&e.constructor.resolve===g?(i=t,(s=e)._state===x?S(i,s._result):s._state===T?E(i,s._result):B(s,void 0,function(t){return k(i,t)},function(t){return E(i,t)})):void 0===n?S(t,e):u(n)?(r=e,o=n,c(function(e){var n=!1,t=A(o,r,function(t){n||(n=!0,r!==t?k(e,t):S(e,t))},function(t){n||(n=!0,E(e,t))},e._label);!n&&t&&(n=!0,E(e,t))},t)):S(t,e)}function k(e,t){if(e===t)E(e,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(r=t),null===r||"object"!==o&&"function"!==o)S(e,t);else{var n=void 0;try{n=t.then}catch(t){return void E(e,t)}C(e,t,n)}var r,o}function P(t){t._onerror&&t._onerror(t._result),L(t)}function S(t,e){t._state===j&&(t._result=e,t._state=x,0!==t._subscribers.length&&c(L,t))}function E(t,e){t._state===j&&(t._state=T,t._result=e,c(P,t))}function B(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+x]=n,o[i+T]=r,0===i&&t._state&&c(L,t)}function L(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?M(n,r,o,i):o(i);t._subscribers.length=0}}function M(t,e,n,r){var o=u(n),i=void 0,s=void 0,c=!0;if(o){try{i=n(r)}catch(t){c=!1,s=t}if(e===i)return void E(e,new TypeError("A promises callback cannot return that same promise."))}else i=r;e._state!==j||(o&&c?k(e,i):!1===c?E(e,s):t===x?S(e,i):t===T&&E(e,i))}var q=0;function D(t){t[w]=q++,t._state=void 0,t._result=void 0,t._subscribers=[]}var H=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(O),this.promise[w]||D(this.promise),n(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&S(this.promise,this._result))):E(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===j&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===g){var o=void 0,i=void 0,s=!1;try{o=e.then}catch(t){s=!0,i=t}if(o===m&&e._state!==j)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===F){var c=new n(O);s?E(c,i):C(c,e,o),this._willSettleAt(c,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===j&&(this._remaining--,t===T?E(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;B(t,void 0,function(t){return n._settledAt(x,e,t)},function(t){return n._settledAt(T,e,t)})},t}(),F=function(){function e(t){this[w]=q++,this._result=this._state=void 0,this._subscribers=[],O!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){k(e,t)},function(t){E(e,t)})}catch(t){E(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return u(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return F.prototype.then=m,F.all=function(t){return new H(this,t).promise},F.race=function(o){var i=this;return n(o)?new i(function(t,e){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(t,e)}):new i(function(t,e){return e(new TypeError("You must pass an array to race."))})},F.resolve=g,F.reject=function(t){var e=new this(O);return E(e,t),e},F._setScheduler=function(t){o=t},F._setAsap=function(t){c=t},F._asap=c,F.polyfill=function(){var t=void 0;if(void 0!==Y)t=Y;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=F},F.Promise=F}()}(t={exports:{}},t.exports),t.exports).Promise;c=window,e=function(){function r(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),void 0===c)return!1;var e={};e=1<(arguments.length<=1?0:arguments.length-1)?{title:arguments.length<=1?void 0:arguments[1],text:arguments.length<=2?void 0:arguments[2]}:"string"==typeof(arguments.length<=1?void 0:arguments[1])?{title:arguments.length<=1?void 0:arguments[1]}:arguments.length<=1?void 0:arguments[1];var n=o(o({},{title:"標題",text:null,confirmButtonText:null,cancelButtonText:null,clickClose:!0}),e);return this._result=null,this._resolve=null,this._reject=null,this._init(t,n)}var t,e,n;return t=r,(e=[{key:"_init",value:function(t,e){var n=h('\t\t<div class="reveal reveal-msg" data-reveal="">\t\t\t<h3 class="reveal-msg__title text-center">標題</h3>\t\t\t<p class="reveal-msg__desc text-center"><small>敘述</small></p>\t\t\t<div class="button-box grid-x">\t\t\t</div>\t\t</div>\t'),r=$(n);n.querySelector(".reveal-msg__title").innerHTML=e.title;var o=n.querySelector(".reveal-msg__desc");e.text?o.innerHTML=e.text:o.remove();var i=n.querySelector(".button-box"),s=h('<button class="btn hollow btn-cancel" data-close="" aria-label="關閉彈窗" type="button">取消</button>'),c=h('<button class="btn btn-confirm" type="button" data-close="">確認</button>');switch(t){case"confirm":i.appendChild(s),i.appendChild(c);break;case"warning":i.appendChild(s),i.appendChild(c),c.classList.add("alert");break;case"error":i.appendChild(c),c.classList.add("alert"),c.classList.add("w-full");break;default:i.appendChild(c),c.classList.add("w-full")}var u=i.querySelector(".btn-confirm"),a=i.querySelector(".btn-cancel");e.confirmButtonText&&u&&(u.innerHTML=e.confirmButtonText),e.cancelButtonText&&a&&(a.innerHTML=e.cancelButtonText);var l={el:n,$el:r,confirmButton:u,cancelButton:a},f={closeOnClick:e.clickClose,closeOnEsc:e.clickClose};return new Foundation.Reveal(r,f),r.on("closed.zf.reveal",function(){var t=$(this);setTimeout(function(){t.parent().remove()},100)}),r.foundation("open"),this._result=this._promise(l)}},{key:"_promise",value:function(r){var o=this;return new u(function(t,e){o._resolve=t,o._reject=e;var n={ok:!1,cancel:!1};r.confirmButton&&r.confirmButton.addEventListener("click",function(){n.ok=!0,t(n)}),r.cancelButton&&r.cancelButton.addEventListener("click",function(){n.cancel=!0,t(n)}),r.$el.on("closed.zf.reveal",function(){t(n)})})}}])&&i(t.prototype,e),n&&i(t,n),r}(),c.popup=function(t){return 1==(arguments.length<=1?0:arguments.length-1)?new e(t,arguments.length<=1?void 0:arguments[1]):new e(t,arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}}();
//# sourceMappingURL=../maps/modules/popup-module.min.js.map
